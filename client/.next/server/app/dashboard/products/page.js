(()=>{var e={};e.id=95,e.ids=[95],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},79032:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(52923),r(22834),r(92437),r(35866);var s=r(23191),a=r(88716),n=r(37922),o=r.n(n),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,52923)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,92437)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\products\\page.tsx"],u="/dashboard/products/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},38095:(e,t,r)=>{Promise.resolve().then(r.bind(r,34336))},34336:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(10326),a=r(17577),n=r(77109),o=r(22325),i=r(46226);function l({productId:e,onClose:t}){let[r,n]=(0,a.useState)({name:"",price:"",rating:"",stockQuantity:"",image:""}),[l,d]=(0,a.useState)(""),{data:c}=(0,o.lZ)(e,{skip:!e}),[u]=(0,o.qX)(),[p]=(0,o.wE)(),m=e=>{n({...r,[e.target.name]:e.target.value})},x=async s=>{s.preventDefault();try{let s={...r,price:parseFloat(r.price),rating:r.rating?parseFloat(r.rating):void 0,stockQuantity:parseInt(r.stockQuantity)};e?await p({id:e,...s}).unwrap():await u(s).unwrap(),t()}catch(e){alert("Failed to save product")}};return s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-96 max-w-full",children:[s.jsx("h2",{className:"text-2xl font-bold mb-5 text-gray-800",children:e?"Edit Product":"Create Product"}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[l&&s.jsx("div",{className:"w-24 h-24 flex items-center justify-center overflow-hidden rounded-md border mb-2",children:s.jsx(i.default,{src:l,alt:"Preview",width:96,height:96,style:{width:"96px",height:"auto"},className:"object-contain",unoptimized:!0})}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let s=URL.createObjectURL(t);d(s),n({...r,image:s})},className:"w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block mb-1 font-medium text-gray-700",children:"Product Name"}),s.jsx("input",{type:"text",name:"name",value:r.name,onChange:m,className:"w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block mb-1 font-medium text-gray-700",children:"Price"}),s.jsx("input",{type:"number",name:"price",value:r.price,onChange:m,className:"w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block mb-1 font-medium text-gray-700",children:"Rating"}),s.jsx("input",{type:"number",name:"rating",value:r.rating,onChange:m,className:"w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block mb-1 font-medium text-gray-700",children:"Stock Quantity"}),s.jsx("input",{type:"number",name:"stockQuantity",value:r.stockQuantity,onChange:m,className:"w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-5",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 shadow-md transition-shadow",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-green-400 to-green-600 text-white rounded-lg font-semibold hover:from-green-500 hover:to-green-700 transition-shadow shadow-md",children:e?"Update":"Create"})]})]})]})})}var d=r(54886);function c(){let{data:e}=(0,n.useSession)(),t=e?.user?.role==="ADMIN",r=(0,d.CG)(e=>e.global.isDarkMode),[c,u]=(0,a.useState)(1),[p]=(0,a.useState)(6),[m,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),{data:y,isLoading:j,isError:v}=(0,o.C$)({page:c,limit:p,search:m}),[w]=(0,o.xq)(),N=async e=>{if(t&&confirm("Are you sure you want to delete this product?"))try{await w(e).unwrap()}catch{alert("Failed to delete product. Make sure there are no related records.")}},k=e=>{t&&(f(e),g(!0))},P=["/images/products/product1.png","/images/products/product2.png","/images/products/product3.png","/images/products/product4.png","/images/products/product5.png","/images/products/product6.png"];return j?s.jsx("div",{className:"p-4",children:"Loading products..."}):v?s.jsx("div",{className:"p-4 text-red-500",children:"Failed to load products"}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Products"}),t&&s.jsx("button",{onClick:()=>{t&&(f(null),g(!0))},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 shadow-md transition-shadow",children:"+ Create Product"})]}),s.jsx("div",{className:"mb-4 w-full md:w-1/3",children:s.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:e=>{x(e.target.value),u(1)},className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsx("div",{className:`overflow-x-auto rounded-lg shadow ${r?"bg-gray-800":"bg-white"}`,children:(0,s.jsxs)("table",{className:"w-full min-w-[700px] border-collapse",children:[s.jsx("thead",{className:r?"bg-gray-700 text-white":"bg-gray-100",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"p-3 border-b text-center w-20",children:"Image"}),s.jsx("th",{className:"p-3 border-b text-center w-40",children:"Name"}),s.jsx("th",{className:"p-3 border-b text-center w-32",children:"Price"}),s.jsx("th",{className:"p-3 border-b text-center w-32",children:"Stock"}),s.jsx("th",{className:"p-3 border-b text-center w-32",children:"Rating"}),s.jsx("th",{className:"p-3 border-b text-center w-48",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[y?.products.map((e,a)=>s.jsxs("tr",{className:r?"hover:bg-gray-700":"hover:bg-gray-50",children:[s.jsx("td",{className:"p-3 border-b text-center align-middle",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center overflow-hidden rounded-md border mx-auto",children:s.jsx(i.default,{src:P[a%P.length],alt:e.name,width:48,height:48,className:"object-contain w-full h-full"})})}),s.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.name}),s.jsxs("td",{className:"p-3 border-b text-center align-middle",children:["â‚¹",e.price]}),s.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.stockQuantity}),s.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.rating??"-"}),s.jsx("td",{className:"p-3 border-b text-center align-middle",children:t?s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{onClick:()=>k(e.id),className:"px-3 py-1 bg-yellow-400 text-white rounded-lg hover:bg-yellow-500 shadow-md transition",children:"Edit"}),s.jsx("button",{onClick:()=>N(e.id),className:"px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 shadow-md transition",children:"Delete"})]}):s.jsx("span",{className:"text-gray-400",children:"Read-only"})})]},e.id)),y?.products.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center p-4 text-gray-500",children:"No products found"})})]})]})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[s.jsx("button",{disabled:1===c,onClick:()=>u(e=>e-1),className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 transition-colors",children:"Previous"}),(0,s.jsxs)("span",{className:"font-medium",children:["Page ",y?.pagination.page," of ",y?.pagination.totalPages]}),s.jsx("button",{disabled:c===y?.pagination.totalPages,onClick:()=>u(e=>e+1),className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 transition-colors",children:"Next"})]}),h&&s.jsx(l,{productId:b,onClose:()=>g(!1)})]})}},52923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\matka\OneDrive\Desktop\StockPilot-InventoryManagementSystem\client\src\app\dashboard\products\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,827,339,881,300],()=>r(79032));module.exports=s})();