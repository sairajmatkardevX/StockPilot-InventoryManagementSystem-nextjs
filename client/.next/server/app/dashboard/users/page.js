(()=>{var e={};e.id=618,e.ids=[618],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},12489:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(79370),t(22834),t(92437),t(35866);var r=t(23191),a=t(88716),l=t(37922),n=t.n(l),o=t(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let d=["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79370)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22834)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92437)),"C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\matka\\OneDrive\\Desktop\\StockPilot-InventoryManagementSystem\\client\\src\\app\\dashboard\\users\\page.tsx"],u="/dashboard/users/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56622:(e,s,t)=>{Promise.resolve().then(t.bind(t,51765))},51765:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(10326),a=t(17577),l=t(77109),n=t(22325),o=t(54886),i=t(46226);let d=["/images/users/user1.png","/images/users/user2.png","/images/users/user3.png","/images/users/user4.png","/images/users/user5.png"];function c(){let{data:e}=(0,l.useSession)(),s=e?.user?.role==="ADMIN",t=(0,o.CG)(e=>e.global.isDarkMode),{data:c,isLoading:u,isError:m}=(0,n.zQ)(),[x]=(0,n.ny)(),[p]=(0,n.kD)(),[h]=(0,n.I1)(),[b,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[y,j]=(0,a.useState)({name:"",email:"",role:"USER",password:""}),[w,N]=(0,a.useState)(""),[k,P]=(0,a.useState)(1),[S]=(0,a.useState)(6),C=(0,a.useMemo)(()=>c||[],[c]),D=(0,a.useMemo)(()=>C.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),[C,w]),M=(0,a.useMemo)(()=>{let e=(k-1)*S;return D.slice(e,e+S)},[D,k,S]),_=Math.ceil(D.length/S),U=e=>{v(e),j({name:e.name,email:e.email||"",role:e.role,password:""}),g(!0)},q=async e=>{if(confirm("Are you sure you want to delete this user?"))try{await h(e).unwrap(),alert("User deleted successfully ✅"),1===M.length&&k>1&&P(k-1)}catch{alert("Failed to delete user ❌")}},A=async()=>{try{f?await p({id:f.userId,...y}).unwrap():await x(y).unwrap(),g(!1)}catch{alert("Failed to save user ❌")}};return u?r.jsx("div",{className:"p-4",children:"Loading users..."}):m||!c?r.jsx("div",{className:"p-4 text-red-500",children:"Failed to load users"}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Users"}),s&&r.jsx("button",{onClick:()=>{v(null),j({name:"",email:"",role:"USER",password:""}),g(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 shadow-md transition-shadow",children:"+ Add User"})]}),r.jsx("div",{className:"mb-4 w-full md:w-1/3",children:r.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:e=>{N(e.target.value),P(1)},className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),r.jsx("div",{className:`overflow-x-auto rounded-lg shadow ${t?"bg-gray-800":"bg-white"}`,children:(0,r.jsxs)("table",{className:"w-full min-w-[700px] border-collapse",children:[r.jsx("thead",{className:t?"bg-gray-700 text-white":"bg-gray-100",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"p-3 border-b text-center w-20",children:"Avatar"}),r.jsx("th",{className:"p-3 border-b text-center w-40",children:"Name"}),r.jsx("th",{className:"p-3 border-b text-center w-48",children:"Email"}),r.jsx("th",{className:"p-3 border-b text-center w-32",children:"Role"}),r.jsx("th",{className:"p-3 border-b text-center w-48",children:"Actions"})]})}),(0,r.jsxs)("tbody",{children:[M.map((e,a)=>(0,r.jsxs)("tr",{className:t?"hover:bg-gray-700":"hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 border-b text-center align-middle",children:r.jsx("div",{className:"w-12 h-12 flex items-center justify-center overflow-hidden rounded-full border mx-auto",children:r.jsx(i.default,{src:d[a%d.length],alt:e.name,width:48,height:48,className:"object-cover rounded-full w-full h-full"})})}),r.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.name}),r.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.email||"-"}),r.jsx("td",{className:"p-3 border-b text-center align-middle",children:e.role}),r.jsx("td",{className:"p-3 border-b text-center align-middle",children:s?(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>U(e),className:"px-3 py-1 bg-yellow-400 text-white rounded-lg hover:bg-yellow-500 shadow-md transition",children:"Edit"}),r.jsx("button",{onClick:()=>q(e.userId),className:"px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 shadow-md transition",children:"Delete"})]}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Read-only"})})]},e.userId)),0===M.length&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No users found"})})]})]})}),D.length>S&&(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[r.jsx("button",{disabled:1===k,onClick:()=>P(e=>e-1),className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 transition-colors",children:"Previous"}),(0,r.jsxs)("span",{className:"font-medium",children:["Page ",k," of ",_]}),r.jsx("button",{disabled:k===_,onClick:()=>P(e=>e+1),className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 transition-colors",children:"Next"})]}),s&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:`rounded-lg p-6 w-full max-w-md ${t?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit User":"Add User"}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),A()},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),r.jsx("input",{type:"text",value:y.name,onChange:e=>j({...y,name:e.target.value}),className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),r.jsx("input",{type:"email",value:y.email,onChange:e=>j({...y,email:e.target.value}),className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),r.jsx("input",{type:"password",value:y.password,onChange:e=>j({...y,password:e.target.value}),className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!f})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Role"}),(0,r.jsxs)("select",{value:y.role,onChange:e=>j({...y,role:e.target.value}),className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",children:[r.jsx("option",{value:"USER",children:"USER"}),r.jsx("option",{value:"ADMIN",children:"ADMIN"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[r.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Save"})]})]})]})})]})}},79370:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\matka\OneDrive\Desktop\StockPilot-InventoryManagementSystem\client\src\app\dashboard\users\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,827,339,881,300],()=>t(12489));module.exports=r})();